# ุฏููู ุงุณุชูุดุงู ุฃุฎุทุงุก Firebase

## ุฎุทุฃ `firebase_store/object-not-found`

ูุฐุง ุงูุฎุทุฃ ูุนูู ุฃู ุงููุณุชูุฏ ุฃู ุงููุฌููุนุฉ ุงููุทููุจุฉ ุบูุฑ ููุฌูุฏุฉ ูู Firebase Firestore.

### ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:

1. **ุงููุชุฌุฑ ุบูุฑ ููุฌูุฏ**: ุงููุณุชุฎุฏู ูู ููุดุฆ ูุชุฌุฑุงู ุจุนุฏ
2. **ุงููุฆุงุช ุบูุฑ ููุฌูุฏุฉ**: ุงููุชุฌุฑ ููุฌูุฏ ููู subcollection `products` ูุงุฑุบ
3. **ูุดููุฉ ูู ุงููุตุงุฏูุฉ**: ุงููุณุชุฎุฏู ุบูุฑ ูุณุฌู ุฏุฎูู ุฃู ุงูุชูุช ุฌูุณุชู
4. **ูุดููุฉ ูู ุงูุงุชุตุงู**: ูุดููุฉ ูู ุงุชุตุงู Firebase

### ุงูุญููู:

#### 1. ุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุงูุชุดุฎูุต
- ุงุถุบุท ุนูู ุฃููููุฉ ุงูุจู (๐) ูู ุฃุนูู ุงูุตูุญุฉ
- ุฑุงุฌุน ุฑุณุงุฆู ุงููููุณูู ููุชุดุฎูุต ุงูุชูุตููู

#### 2. ุงูุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู
```dart
final user = FirebaseAuth.instance.currentUser;
if (user == null) {
  // ุงููุณุชุฎุฏู ุบูุฑ ูุณุฌู ุฏุฎูู
}
```

#### 3. ุงูุชุญูู ูู ูุฌูุฏ ุงููุชุฌุฑ
```dart
final storeDoc = await FirebaseFirestore.instance
    .collection('markets')
    .doc(storeId)
    .get();

if (!storeDoc.exists) {
  // ุงููุชุฌุฑ ุบูุฑ ููุฌูุฏ
}
```

#### 4. ุฅูุดุงุก ุงููุฆุงุช ุงูุงูุชุฑุงุถูุฉ
ุฅุฐุง ูุงู ุงููุชุฌุฑ ููุฌูุฏ ููู ุงููุฆุงุช ุบูุฑ ููุฌูุฏุฉุ ุณูุชู ุฅูุดุงุคูุง ุชููุงุฆูุงู:
- "ุงูุฃูุซุฑ ูุจูุนุงู"
- "ุงูุนุฑูุถ"

### ุฎุทูุงุช ุงุณุชูุดุงู ุงูุฃุฎุทุงุก:

1. **ุชุญูู ูู ุชุณุฌูู ุงูุฏุฎูู**
   - ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ูุณุฌู ุฏุฎูู
   - ุชุญูู ูู ุตุญุฉ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

2. **ุชุญูู ูู ูุฌูุฏ ุงููุชุฌุฑ**
   - ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ูุฏูู ูุชุฌุฑ ูุงุญุฏ ุนูู ุงูุฃูู
   - ุชุญูู ูู ุตุญุฉ ูุนุฑู ุงููุชุฌุฑ

3. **ุชุญูู ูู ุงููุฆุงุช**
   - ุชุฃูุฏ ูู ูุฌูุฏ subcollection `products`
   - ุชุญูู ูู ูุฌูุฏ ูุฆุงุช ุฏุงุฎู ุงููุชุฌุฑ

4. **ุชุญูู ูู ุงูุตูุงุญูุงุช**
   - ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ูุฏูู ุตูุงุญูุฉ ุงููุชุงุจุฉ
   - ุชุญูู ูู ููุงุนุฏ Firebase Security Rules

### ุฑุณุงุฆู ุงูุฎุทุฃ ุงูุดุงุฆุนุฉ:

- `firebase_store/object-not-found`: ุงููุณุชูุฏ ุบูุฑ ููุฌูุฏ
- `firebase_store/permission-denied`: ูุง ุชูุฌุฏ ุตูุงุญูุฉ ูููุตูู
- `firebase_store/unavailable`: ุฎุฏูุฉ Firebase ุบูุฑ ูุชุงุญุฉ
- `firebase_store/deadline-exceeded`: ุงูุชูุช ูููุฉ ุงูุทูุจ

### ูุตุงุฆุญ ููููุงูุฉ:

1. **ุงูุชุญูู ูู ุงูุจูุงูุงุช ูุจู ุงูุงุณุชุฎุฏุงู**
2. **ุงุณุชุฎุฏุงู try-catch ููุนุงูุฌุฉ ุงูุฃุฎุทุงุก**
3. **ุฅุถุงูุฉ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูููุณุชุฎุฏู**
4. **ุฅูุดุงุก ุจูุงูุงุช ุงูุชุฑุงุถูุฉ ุนูุฏ ุงูุญุงุฌุฉ**

### ูุซุงู ุนูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก:

```dart
try {
  final categories = await ProductService.getCategories(storeId);
  if (categories.isEmpty) {
    // ุฅูุดุงุก ูุฆุงุช ุงูุชุฑุงุถูุฉ
    await ProductService.createDefaultCategories(storeId);
  }
} catch (e) {
  if (e.toString().contains('object-not-found')) {
    // ุงููุชุฌุฑ ุบูุฑ ููุฌูุฏ
    showError('ุงููุชุฌุฑ ุบูุฑ ููุฌูุฏ');
  } else {
    // ุฎุทุฃ ุขุฎุฑ
    showError('ุฎุทุฃ ูู ุชุญููู ุงูุจูุงูุงุช: $e');
  }
}
```
